---

# تحلیل و استخراج قوانین انجمنی (Association Rules)

در پاسخ به درخواست شما برای یافتن **تمام قوانین انجمنی ممکن**، لازم است توضیحاتی را بر اساس مفاهیم مطرح شده در منابع و رویکردهای عملی ارائه دهم.

---

## قوانین انجمنی چیستند؟

**قوانین انجمنی** گزاره‌هایی از نوع "اگر-آنگاه" (If-Then) هستند که ارتباطات بین آیتم‌ها را در مجموعه داده‌های سبد خرید نشان می‌دهند. این قوانین به صورت $I \rightarrow j$ بیان می‌شوند، که در آن:

* $I$ یک مجموعه از آیتم‌ها (antecedent) است.
* $j$ یک آیتم منفرد است که عضوی از $I$ نیست (consequent).

**مفهوم:** اگر تمام آیتم‌های موجود در $I$ در یک سبد خرید ظاهر شوند، آنگاه احتمالاً آیتم $j$ نیز در همان سبد خرید ظاهر خواهد شد.

### اندازه‌گیری یک قانون انجمنی

دو معیار اصلی برای ارزیابی یک قانون انجمنی وجود دارد:

1.  **پشتیبانی (Support):** پشتیبانی یک مجموعه از آیتم‌ها، تعداد سبدهایی است که شامل **تمام** آن آیتم‌ها هستند. برای یک قانون $I \rightarrow j$، **پشتیبانی قانون** برابر با پشتیبانی مجموعه $I \cup \{j\}$ است. پشتیبانی نشان‌دهنده فراوانی وقوع همزمان آیتم‌ها در سبدهاست.
2.  **اطمینان (Confidence):** اطمینان یک قانون $I \rightarrow j$ نشان‌دهنده احتمال شرطی وقوع $j$، به شرط وقوع $I$ است. فرمول محاسبه اطمینان به صورت زیر است:

    $$
    \text{Confidence}(I \rightarrow j) = \frac{\text{Support}(I \cup \{j\})}{\text{Support}(I)}
    $$

    اطمینان نشان می‌دهد که چقدر می‌توان به این قاعده اعتماد کرد که اگر آیتم‌های $I$ خریداری شوند، $j$ نیز خریداری خواهد شد.

---

## داده‌های سبد خرید شما

مجموعه داده‌های شما شامل ۸ سبد خرید به شرح زیر است:

* B1 = {m, c, b}
* B2 = {m, p, j}
* B3 = {m, c, b, n}
* B4 = {c, j}
* B5 = {m, p, b}
* B6 = {m, c, b, j}
* B7 = {c, b, j}
* B8 = {b, c}

**مجموع آیتم‌های منحصر به فرد:** {m, c, b, p, j, n}
**تعداد کل سبدها:** ۸

---

## چالش یافتن "تمام" قوانین انجمنی

همانطور که اشاره کردید، یافتن "تمام" قوانین انجمنی ممکن به معنای بررسی هر زیرمجموعه غیرتهی از آیتم‌ها به عنوان $I$ و هر آیتم $j$ که در $I$ نیست، برای تشکیل قانون $I \rightarrow j$ است. با توجه به ۶ آیتم منحصر به فرد در مجموعه داده شما، تعداد زیرمجموعه‌ها و ترکیب‌های ممکن بسیار زیاد می‌شود.

### مثال‌هایی از محاسبه پشتیبانی و اطمینان

برای درک بهتر، چند مثال از محاسبات پشتیبانی و اطمینان را مرور می‌کنیم:

**پشتیبانی برخی مجموعه‌های آیتم:**

* **{m}**: در B1, B2, B3, B5, B6 $\rightarrow$ **پشتیبانی = 5**
* **{c}**: در B1, B3, B4, B6, B7, B8 $\rightarrow$ **پشتیبانی = 6**
* **{b}**: در B1, B3, B5, B6, B7, B8 $\rightarrow$ **پشتیبانی = 6**
* **{m, c}**: در B1, B3, B6 $\rightarrow$ **پشتیبانی = 3**
* **{c, b}**: در B1, B3, B6, B7, B8 $\rightarrow$ **پشتیبانی = 5**
* **{m, c, b}**: در B1, B3, B6 $\rightarrow$ **پشتیبانی = 3**
* **{p, j}**: در B2 $\rightarrow$ **پشتیبانی = 1**
* **{c, b, j}**: در B6, B7 $\rightarrow$ **پشتیبانی = 2**
* **{p}**: در B2, B5 $\rightarrow$ **پشتیبانی = 2**

**اطمینان برخی قوانین انجمنی:**

* **{m} $\rightarrow$ {c}:**
    * $\text{Confidence} = \frac{\text{Support}(\{m, c\})}{\text{Support}(\{m\})} = \frac{3}{5} = 0.6$
* **{c, b} $\rightarrow$ {m}:**
    * $\text{Confidence} = \frac{\text{Support}(\{c, b, m\})}{\text{Support}(\{c, b\})} = \frac{3}{5} = 0.6$
* **{p} $\rightarrow$ {j}:**
    * $\text{Confidence} = \frac{\text{Support}(\{p, j\})}{\text{Support}(\{p\})} = \frac{1}{2} = 0.5$
* **{c, b} $\rightarrow$ {j}:**
    * $\text{Confidence} = \frac{\text{Support}(\{c, b, j\})}{\text{Support}(\{c, b\})} = \frac{2}{5} = 0.4$

---

## رویکرد عملی در کشف قوانین انجمنی

در عمل، رویکرد استاندارد برای کشف قوانین انجمنی (همانطور که در منابعی نظیر الگوریتم A-Priori توضیح داده شده است) بر یافتن **قوانین مفید و قابل اعتماد** متمرکز است، نه صرفاً "تمام" قوانین ممکن. این رویکرد شامل دو مرحله اصلی است:

1.  **یافتن مجموعه‌های پرتکرار (Frequent Itemsets):**
    * ابتدا، مجموعه‌هایی از آیتم‌ها شناسایی می‌شوند که **پشتیبانی آن‌ها حداقل برابر با یک آستانه پشتیبانی (minimum support threshold)** از پیش تعیین شده باشد. این آستانه کمک می‌کند تا تنها آیتم‌ست‌های پرکاربرد در نظر گرفته شوند و آیتم‌ست‌های نادر فیلتر شوند.
2.  **استخراج قوانین از مجموعه‌های پرتکرار:**
    * پس از یافتن مجموعه‌های پرتکرار، قوانین انجمنی از آن‌ها استخراج می‌شوند. برای هر قانون استخراج شده، **اطمینان (confidence)** آن محاسبه می‌شود.
    * در نهایت، تنها قوانینی که **اطمینان آن‌ها حداقل برابر با یک آستانه اطمینان (minimum confidence threshold)** از پیش تعیین شده باشد، به عنوان قوانین نهایی و مفید در نظر گرفته می‌شوند.

### اهمیت آستانه‌ها (Thresholds)

همانطور که در توضیح شما اشاره شد، درخواست فعلی شما شامل آستانه‌های پشتیبانی یا اطمینان نیست. بدون این آستانه‌ها، لیست کردن "تمام" قوانین ممکن، حتی آن‌هایی که بسیار نادر یا با اطمینان بسیار پایین هستند، از نظر عملی ارزش چندانی ندارد.

**برای ارائه یک پاسخ عملی و همسو با روش‌های معمول تحلیل قوانین انجمنی، تعیین یک آستانه پشتیبانی (برای شناسایی مجموعه‌های پرتکرار) و/یا یک آستانه اطمینان (برای فیلتر کردن قوانین با اطمینان پایین) ضروری است.**

اگر مایلید، می‌توانید آستانه‌های مورد نظر خود را مشخص کنید تا بتوانیم به صورت هدفمندتر و مطابق با رویکردهای عملی، قوانین انجمنی معنادار را از داده‌های شما استخراج کنیم.