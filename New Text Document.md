 تمرین 9.2.1  این تمرین به بررسی **فاصله کسینوسی** (Cosine Distance) بین بردارهای مشخصه (Feature Vectors) کامپیوترها، با در نظر گرفتن فاکتورهای مقیاس‌بندی مختلف می‌پردازد. فاصله کسینوسی در فضاهایی که دارای ابعاد هستند، از جمله فضاهای اقلیدسی، کاربرد دارد و می‌تواند برای اندازه‌گیری شباهت بین اقلام یا کاربران در سیستم‌های توصیه‌گر استفاده شود.

**تعریف بردارهای مشخصه برای کامپیوترها:**
بر اساس مقادیر داده شده در جدول، بردارهای مشخصه برای هر کامپیوتر به شرح زیر است:
*   **کامپیوتر A**: [سرعت پردازنده: 3.06, حجم دیسک: 500, حجم حافظه اصلی: 6]
*   **کامپیوتر B**: [سرعت پردازنده: 2.68, حجم دیسک: 320, حجم حافظه اصلی: 4]
*   **کامپیوتر C**: [سرعت پردازنده: 2.92, حجم دیسک: 640, حجم حافظه اصلی: 6]

همانطور که در منبع اشاره شده است، اگر این اجزا مقیاس‌بندی نشوند، مولفه‌ی **حجم دیسک** به دلیل مقادیر بسیار بزرگتر خود نسبت به سایر مولفه‌ها، بر محاسبه‌ی شباهت غلبه خواهد کرد. بنابراین، فاکتورهای مقیاس‌بندی برای هر مولفه در نظر گرفته می‌شود:
*   سرعت پردازنده: 1
*   حجم دیسک: $\alpha$
*   حجم حافظه اصلی: $\beta$

بردارهای مقیاس‌بندی شده برای هر کامپیوتر:
*   **A_scaled** = $[3.06 \times 1, 500 \times \alpha, 6 \times \beta] = [3.06, 500\alpha, 6\beta]$
*   **B_scaled** = $[2.68 \times 1, 320 \times \alpha, 4 \times \beta] = [2.68, 320\alpha, 4\beta]$
*   **C_scaled** = $[2.92 \times 1, 640 \times \alpha, 6 \times \beta] = [2.92, 640\alpha, 6\beta]$

**فرمول‌های مورد نیاز:**
برای محاسبه **فاصله کسینوسی** بین دو بردار **x** و **y**، ابتدا **حاصل‌ضرب داخلی** (Dot Product) و **نُرم L2** (L2-norm) هر بردار را محاسبه می‌کنیم:

*   **حاصل‌ضرب داخلی:** $\mathbf{x} \cdot \mathbf{y} = \sum_{i=1}^{n} x_i y_i$
*   **نُرم L2:** $||\mathbf{x}|| = \sqrt{\sum_{i=1}^{n} x_i^2}$
*   **کسینوس زاویه بین دو بردار ($\theta$):** $\cos(\theta) = \frac{\mathbf{x} \cdot \mathbf{y}}{||\mathbf{x}|| \cdot ||\mathbf{y}||}$
*   **زاویه بر حسب درجه:** $\theta = \arccos(\cos(\theta)) \times \frac{180}{\pi}$

---

### **(a) محاسبه کسینوس زوایا بر حسب $\alpha$ و $\beta$:**

**1. برای جفت (A, B):**
*   **حاصل‌ضرب داخلی:**
    $\mathbf{A} \cdot \mathbf{B} = (3.06)(2.68) + (500\alpha)(320\alpha) + (6\beta)(4\beta)$
    $= 8.2008 + 160000\alpha^2 + 24\beta^2$
*   **نُرم A به توان 2:**
    $||\mathbf{A}||^2 = (3.06)^2 + (500\alpha)^2 + (6\beta)^2$
    $= 9.3636 + 250000\alpha^2 + 36\beta^2$
*   **نُرم B به توان 2:**
    $||\mathbf{B}||^2 = (2.68)^2 + (320\alpha)^2 + (4\beta)^2$
    $= 7.1824 + 102400\alpha^2 + 16\beta^2$
*   **کسینوس زاویه (A, B):**
    $\cos(\theta_{AB}) = \frac{8.2008 + 160000\alpha^2 + 24\beta^2}{\sqrt{(9.3636 + 250000\alpha^2 + 36\beta^2) \times (7.1824 + 102400\alpha^2 + 16\beta^2)}}$

**2. برای جفت (A, C):**
*   **حاصل‌ضرب داخلی:**
    $\mathbf{A} \cdot \mathbf{C} = (3.06)(2.92) + (500\alpha)(640\alpha) + (6\beta)(6\beta)$
    $= 8.9352 + 320000\alpha^2 + 36\beta^2$
*   **نُرم A به توان 2:** (همان بالا)
    $||\mathbf{A}||^2 = 9.3636 + 250000\alpha^2 + 36\beta^2$
*   **نُرم C به توان 2:**
    $||\mathbf{C}||^2 = (2.92)^2 + (640\alpha)^2 + (6\beta)^2$
    $= 8.5264 + 409600\alpha^2 + 36\beta^2$
*   **کسینوس زاویه (A, C):**
    $\cos(\theta_{AC}) = \frac{8.9352 + 320000\alpha^2 + 36\beta^2}{\sqrt{(9.3636 + 250000\alpha^2 + 36\beta^2) \times (8.5264 + 409600\alpha^2 + 36\beta^2)}}$

**3. برای جفت (B, C):**
*   **حاصل‌ضرب داخلی:**
    $\mathbf{B} \cdot \mathbf{C} = (2.68)(2.92) + (320\alpha)(640\alpha) + (4\beta)(6\beta)$
    $= 7.8256 + 204800\alpha^2 + 24\beta^2$
*   **نُرم B به توان 2:** (همان بالا)
    $||\mathbf{B}||^2 = 7.1824 + 102400\alpha^2 + 16\beta^2$
*   **نُرم C به توان 2:** (همان بالا)
    $||\mathbf{C}||^2 = 8.5264 + 409600\alpha^2 + 36\beta^2$
*   **کسینوس زاویه (B, C):**
    $\cos(\theta_{BC}) = \frac{7.8256 + 204800\alpha^2 + 24\beta^2}{\sqrt{(7.1824 + 102400\alpha^2 + 16\beta^2) \times (8.5264 + 409600\alpha^2 + 36\beta^2)}}$

---

### **(b) محاسبه زوایا اگر $\alpha = 1$ و $\beta = 1$:**

در این حالت، هیچ مقیاس‌بندی اعمال نمی‌شود و انتظار می‌رود که مولفه‌ی حجم دیسک (با مقادیر 500, 320, 640) بر محاسبات غلبه کند و منجر به زوایای بسیار کوچک (شباهت بالا) شود، حتی اگر در واقعیت کامپیوترها تفاوت‌های قابل توجهی داشته باشند.

**بردارهای مقیاس‌بندی شده:**
*   A_scaled = $[3.06, 500, 6]$
*   B_scaled = $[2.68, 320, 4]$
*   C_scaled = $[2.92, 640, 6]$

**1. برای جفت (A, B):**
*   $\mathbf{A} \cdot \mathbf{B} = 8.2008 + 160000 + 24 = 160032.2008$
*   $||\mathbf{A}|| = \sqrt{9.3636 + 250000 + 36} = \sqrt{250045.3636} \approx 500.045$
*   $||\mathbf{B}|| = \sqrt{7.1824 + 102400 + 16} = \sqrt{102423.1824} \approx 320.036$
*   $\cos(\theta_{AB}) = \frac{160032.2008}{500.045 \times 320.036} = \frac{160032.2008}{160033.911} \approx \mathbf{0.999989}$
*   $\theta_{AB} = \arccos(0.999989) \approx \mathbf{0.25 \text{ degrees}}$

**2. برای جفت (A, C):**
*   $\mathbf{A} \cdot \mathbf{C} = 8.9352 + 320000 + 36 = 320044.9352$
*   $||\mathbf{A}|| \approx 500.045$
*   $||\mathbf{C}|| = \sqrt{8.5264 + 409600 + 36} = \sqrt{409654.5264} \approx 640.042$
*   $\cos(\theta_{AC}) = \frac{320044.9352}{500.045 \times 640.042} = \frac{320044.9352}{320046.225} \approx \mathbf{0.9999959}$
*   $\theta_{AC} = \arccos(0.9999959) \approx \mathbf{0.17 \text{ degrees}}$

**3. برای جفت (B, C):**
*   $\mathbf{B} \cdot \mathbf{C} = 7.8256 + 204800 + 24 = 204831.8256$
*   $||\mathbf{B}|| \approx 320.036$
*   $||\mathbf{C}|| \approx 640.042$
*   $\cos(\theta_{BC}) = \frac{204831.8256}{320.036 \times 640.042} = \frac{204831.8256}{204832.88} \approx \mathbf{0.9999948}$
*   $\theta_{BC} = \arccos(0.9999948) \approx \mathbf{0.21 \text{ degrees}}$

**نتیجه‌گیری برای (b):**
همانطور که مشاهده می‌شود، بدون مقیاس‌بندی مناسب، تمام کسینوس‌های زاویه بسیار نزدیک به 1 و زوایا بسیار کوچک (نزدیک به 0 درجه) هستند. این نشان می‌دهد که تمامی کامپیوترها بسیار شبیه به هم به نظر می‌رسند، که به دلیل غلبه‌ی مولفه‌ی حجم دیسک در محاسبه‌ی نُرم و حاصل‌ضرب داخلی است.

---

### **(c) محاسبه زوایا اگر $\alpha = 0.01$ و $\beta = 0.5$:**

با اعمال این فاکتورهای مقیاس‌بندی، انتظار می‌رود که تأثیر مولفه‌های مختلف در محاسبه‌ی شباهت متعادل‌تر شود و تفاوت‌های واقعی بین کامپیوترها منعکس گردد.

**بردارهای مقیاس‌بندی شده:**
*   A_scaled = $[3.06, 500 \times 0.01, 6 \times 0.5] = [3.06, 5, 3]$
*   B_scaled = $[2.68, 320 \times 0.01, 4 \times 0.5] = [2.68, 3.2, 2]$
*   C_scaled = $[2.92, 640 \times 0.01, 6 \times 0.5] = [2.92, 6.4, 3]$

**1. برای جفت (A, B):**
*   $\mathbf{A} \cdot \mathbf{B} = (3.06)(2.68) + (5)(3.2) + (3)(2) = 8.2008 + 16 + 6 = 30.2008$
*   $||\mathbf{A}|| = \sqrt{(3.06)^2 + 5^2 + 3^2} = \sqrt{9.3636 + 25 + 9} = \sqrt{43.3636} \approx 6.585$
*   $||\mathbf{B}|| = \sqrt{(2.68)^2 + (3.2)^2 + 2^2} = \sqrt{7.1824 + 10.24 + 4} = \sqrt{21.4224} \approx 4.629$
*   $\cos(\theta_{AB}) = \frac{30.2008}{6.585 \times 4.629} = \frac{30.2008}{30.505} \approx \mathbf{0.990}$
*   $\theta_{AB} = \arccos(0.990) \approx \mathbf{8.11 \text{ degrees}}$

**2. برای جفت (A, C):**
*   $\mathbf{A} \cdot \mathbf{C} = (3.06)(2.92) + (5)(6.4) + (3)(3) = 8.9352 + 32 + 9 = 49.9352$
*   $||\mathbf{A}|| \approx 6.585$
*   $||\mathbf{C}|| = \sqrt{(2.92)^2 + (6.4)^2 + 3^2} = \sqrt{8.5264 + 40.96 + 9} = \sqrt{58.4864} \approx 7.648$
*   $\cos(\theta_{AC}) = \frac{49.9352}{6.585 \times 7.648} = \frac{49.9352}{50.407} \approx \mathbf{0.9906}$
*   $\theta_{AC} = \arccos(0.9906) \approx \mathbf{7.78 \text{ degrees}}$

**3. برای جفت (B, C):**
*   $\mathbf{B} \cdot \mathbf{C} = (2.68)(2.92) + (3.2)(6.4) + (2)(3) = 7.8256 + 20.48 + 6 = 34.3056$
*   $||\mathbf{B}|| \approx 4.629$
*   $||\mathbf{C}|| \approx 7.648$
*   $\cos(\theta_{BC}) = \frac{34.3056}{4.629 \times 7.648} = \frac{34.3056}{35.405} \approx \mathbf{0.9689}$
*   $\theta_{BC} = \arccos(0.9689) \approx \mathbf{14.39 \text{ degrees}}$

**نتیجه‌گیری برای (c):**
با اعمال فاکتورهای مقیاس‌بندی $\alpha = 0.01$ و $\beta = 0.5$، زوایا بزرگتر شده‌اند و تفاوت‌های بیشتری را بین جفت‌های کامپیوترها نشان می‌دهند. این امر منعکس‌کننده‌ی تأثیر متعادل‌تر هر مولفه‌ی مشخصه بر روی محاسبه‌ی شباهت است، به طوری که هیچ مولفه‌ای به تنهایی بر نتیجه غلبه نمی‌کند. این نشان می‌دهد که کامپیوترهای A و C (حدود 7.78 درجه) کمی شبیه‌تر از A و B (حدود 8.11 درجه) هستند، و B و C (حدود 14.39 درجه) کمترین شباهت را در بین این سه جفت دارند.


درخواست شما شامل حل جزئیات تمرین 9.3.1 از کتاب **bookL.pdf** (صفحه 323) است که به بررسی روش‌های مختلف اندازه‌گیری شباهت بین کاربران در یک سیستم توصیه‌گر می‌پردازد. این تمرین بر اساس یک ماتریس کاربر-آیتم (Utility Matrix) است که امتیازات کاربران به آیتم‌ها را در مقیاس 1 تا 5 ستاره نشان می‌دهد.

---

**ترجمه تمرین 9.3.1:**

تمرین 9.3.1: شکل 9.8 یک ماتریس سودمندی (utility matrix) است که امتیازات (در مقیاس 1 تا 5 ستاره) هشت آیتم (a تا h) توسط سه کاربر A، B و C را نشان می‌دهد. موارد زیر را با استفاده از داده‌های این ماتریس محاسبه کنید:

(الف) با در نظر گرفتن ماتریس سودمندی به صورت بولی (Boolean)، **فاصله ژاکارد** (Jaccard distance) را بین هر جفت از کاربران محاسبه کنید.
(ب) بخش (الف) را تکرار کنید، اما از **فاصله کسینوسی** (Cosine distance) استفاده کنید.
(ج) امتیازات 3، 4 و 5 را به عنوان 1 و امتیازات 1، 2 و خانه‌های خالی را به عنوان 0 در نظر بگیرید. **فاصله ژاکارد** را بین هر جفت از کاربران محاسبه کنید.
(د) بخش (ج) را تکرار کنید، اما از **فاصله کسینوسی** استفاده کنید.
(ه) ماتریس را با **نرمال‌سازی** (Normalizing) امتیازات تغییر دهید، به این صورت که از هر ورودی غیرخالی، میانگین امتیاز کاربر مربوطه را کم کنید.
(و) با استفاده از ماتریس نرمال‌شده از بخش (ه)، **فاصله کسینوسی** را بین هر جفت از کاربران محاسبه کنید.

---

**ماتریس سودمندی اولیه (شکل 9.8):**

| آیتم | a | b | c | d | e | f | g | h |
| :--- | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| **A** | 4 | 5 | | 5 | 1 | | 3 | 2 |
| **B** | |  3 | 4 | 3 | 1 | 2 | 1 | |
| **C** | 2 | | 1 | 3 | | 4 | 5 | 3 | 

*نکته: خانه‌های خالی نشان‌دهنده امتیاز ناشناخته یا عدم امتیازدهی هستند.*

---

**فرمول‌های مورد استفاده:**

*   **شباهت ژاکارد (Jaccard Similarity):** برای دو مجموعه $S$ و $T$, $\text{sim}(S, T) = |S \cap T| / |S \cup T|$.
*   **فاصله ژاکارد (Jaccard Distance):** $d(S, T) = 1 - \text{sim}(S, T)$. این یک معیار فاصله معتبر است.
*   **شباهت کسینوسی (Cosine Similarity):** برای دو بردار $\mathbf{x}$ و $\mathbf{y}$, $\cos(\theta) = \frac{\mathbf{x} \cdot \mathbf{y}}{||\mathbf{x}|| \cdot ||\mathbf{y}||}$ [previous turn, 108, 150].
*   **حاصل‌ضرب داخلی (Dot Product):** $\mathbf{x} \cdot \mathbf{y} = \sum_{i=1}^{n} x_i y_i$ [previous turn].
*   **نُرم L2 (L2-Norm / Magnitude):** $||\mathbf{x}|| = \sqrt{\sum_{i=1}^{n} x_i^2}$ [previous turn, 93, 149].
*   **تبدیل کسینوس به زاویه بر حسب درجه:** $\theta = \arccos(\cos(\theta)) \times \frac{180}{\pi}$ [previous turn]. این زاویه در بازه 0 تا 180 درجه قرار می‌گیرد.

---

### **(الف) محاسبه فاصله ژاکارد با ماتریس بولی:**

در این بخش، هر ورودی غیرخالی در ماتریس اصلی به 1 و هر ورودی خالی به 0 تبدیل می‌شود. سپس، مجموعه‌های آیتم‌های امتیازدهی شده برای هر کاربر ایجاد و شباهت و فاصله ژاکارد محاسبه می‌شود.

**ماتریس بولی:**

| آیتم | a | b | c | d | e | f | g | h |
| :--- | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| **A** | 1 | 1 | 1 | 1 | 1 | 1 | 0 | 0 |
| **B** | 0 | 0 | 0 | 1 | 1 | 1 | 1 | 1 |
| **C** | 1 | 1 | 1 | 1 | 1 | 1 | 0 | 0 |

**مجموعه‌های آیتم‌های امتیازدهی شده (غیر-صفر):**
*   $S_A = \{a, b, c, d, e, f\}$
*   $S_B = \{d, e, f, g, h\}$
*   $S_C = \{a, b, c, d, e, f\}$

**1. جفت (A, B):**
*   **اشتراک:** $S_A \cap S_B = \{d, e, f\}$
    *   $|S_A \cap S_B| = 3$
*   **اجتماع:** $S_A \cup S_B = \{a, b, c, d, e, f, g, h\}$
    *   $|S_A \cup S_B| = 8$
*   **شباهت ژاکارد:** $\text{sim}(A, B) = \frac{3}{8} = \mathbf{0.375}$
*   **فاصله ژاکارد:** $d(A, B) = 1 - 0.375 = \mathbf{0.625}$

**2. جفت (A, C):**
*   **اشتراک:** $S_A \cap S_C = \{a, b, c, d, e, f\}$
    *   $|S_A \cap S_C| = 6$
*   **اجتماع:** $S_A \cup S_C = \{a, b, c, d, e, f\}$
    *   $|S_A \cup S_C| = 6$
*   **شباهت ژاکارد:** $\text{sim}(A, C) = \frac{6}{6} = \mathbf{1.0}$
*   **فاصله ژاکارد:** $d(A, C) = 1 - 1.0 = \mathbf{0.0}$
    *   *نتیجه: A و C کاملاً شبیه هستند، زیرا آیتم‌های یکسانی را امتیاز داده‌اند.*

**3. جفت (B, C):**
*   **اشتراک:** $S_B \cap S_C = \{d, e, f\}$
    *   $|S_B \cap S_C| = 3$
*   **اجتماع:** $S_B \cup S_C = \{a, b, c, d, e, f, g, h\}$
    *   $|S_B \cup S_C| = 8$
*   **شباهت ژاکارد:** $\text{sim}(B, C) = \frac{3}{8} = \mathbf{0.375}$
*   **فاصله ژاکارد:** $d(B, C) = 1 - 0.375 = \mathbf{0.625}$

---

### **(ب) محاسبه فاصله کسینوسی با ماتریس بولی:**

در این بخش از همان ماتریس بولی استفاده می‌کنیم. برای محاسبه فاصله کسینوسی، خانه‌های خالی (0) نیز در بردارها لحاظ می‌شوند.

**بردارهای بولی (Vector form):**
*   $\mathbf{A} =$
*   $\mathbf{B} =$
*   $\mathbf{C} =$

**نُرم بردارهای بولی:**
*   $||\mathbf{A}|| = \sqrt{1^2+1^2+1^2+1^2+1^2+1^2+0^2+0^2} = \sqrt{6} \approx 2.449$
*   $||\mathbf{B}|| = \sqrt{0^2+0^2+0^2+1^2+1^2+1^2+1^2+1^2} = \sqrt{5} \approx 2.236$
*   $||\mathbf{C}|| = \sqrt{1^2+1^2+1^2+1^2+1^2+1^2+0^2+0^2} = \sqrt{6} \approx 2.449$

**1. جفت (A, B):**
*   **حاصل‌ضرب داخلی:** $\mathbf{A} \cdot \mathbf{B} = (1)(0)+(1)(0)+(1)(0)+(1)(1)+(1)(1)+(1)(1)+(0)(1)+(0)(1) = 0+0+0+1+1+1+0+0 = \mathbf{3}$
*   **کسینوس زاویه:** $\cos(\theta_{AB}) = \frac{3}{\sqrt{6} \times \sqrt{5}} = \frac{3}{\sqrt{30}} \approx \frac{3}{5.477} \approx \mathbf{0.5477}$
*   **زاویه بر حسب درجه:** $\theta_{AB} = \arccos(0.5477) \approx \mathbf{56.78^\circ}$

**2. جفت (A, C):**
*   **حاصل‌ضرب داخلی:** $\mathbf{A} \cdot \mathbf{C} = (1)(1)+(1)(1)+(1)(1)+(1)(1)+(1)(1)+(1)(1)+(0)(0)+(0)(0) = 1+1+1+1+1+1+0+0 = \mathbf{6}$
*   **کسینوس زاویه:** $\cos(\theta_{AC}) = \frac{6}{\sqrt{6} \times \sqrt{6}} = \frac{6}{6} = \mathbf{1.0}$
*   **زاویه بر حسب درجه:** $\theta_{AC} = \arccos(1.0) = \mathbf{0^\circ}$
    *   *نتیجه: A و C بردارهای کاملاً یکسانی دارند، بنابراین زاویه بین آن‌ها 0 درجه است.*

**3. جفت (B, C):**
*   **حاصل‌ضرب داخلی:** $\mathbf{B} \cdot \mathbf{C} = (0)(1)+(0)(1)+(0)(1)+(1)(1)+(1)(1)+(1)(1)+(1)(0)+(1)(0) = 0+0+0+1+1+1+0+0 = \mathbf{3}$
*   **کسینوس زاویه:** $\cos(\theta_{BC}) = \frac{3}{\sqrt{5} \times \sqrt{6}} = \frac{3}{\sqrt{30}} \approx \frac{3}{5.477} \approx \mathbf{0.5477}$
*   **زاویه بر حسب درجه:** $\theta_{BC} = \arccos(0.5477) \approx \mathbf{56.78^\circ}$

---

### **(ج) محاسبه فاصله ژاکارد با امتیازات گرد شده:**

در این بخش، امتیازات 3، 4 و 5 به 1 تبدیل می‌شوند و امتیازات 1، 2 و خانه‌های خالی به 0 (برای ژاکارد به معنای عدم حضور در مجموعه) تبدیل می‌شوند.

**ماتریس با امتیازات گرد شده:**

| آیتم | a | b | c | d | e | f | g | h |
| :--- | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| **A** | 1 | 1 | 1 | 0 | 1 | 0 | | |
| **B** | | | | 1 | 1 | 1 | 0 | 0 |
| **C** | 0 | 0 | 1 | 1 | 1 | 1 | | |

*نکته: خانه‌های خالی هنوز "عدم امتیازدهی" هستند و در مجموعه‌ها لحاظ نمی‌شوند.*

**مجموعه‌های آیتم‌های امتیازدهی شده (با امتیاز 1):**
*   $S_A' = \{a, b, c, e\}$
*   $S_B' = \{d, e, f\}$
*   $S_C' = \{c, d, e, f\}$

**1. جفت (A, B):**
*   **اشتراک:** $S_A' \cap S_B' = \{e\}$
    *   $|S_A' \cap S_B'| = 1$
*   **اجتماع:** $S_A' \cup S_B' = \{a, b, c, d, e, f\}$
    *   $|S_A' \cup S_B'| = 6$
*   **شباهت ژاکارد:** $\text{sim}(A, B) = \frac{1}{6} \approx \mathbf{0.1667}$
*   **فاصله ژاکارد:** $d(A, B) = 1 - 0.1667 = \mathbf{0.8333}$

**2. جفت (A, C):**
*   **اشتراک:** $S_A' \cap S_C' = \{c, e\}$
    *   $|S_A' \cap S_C'| = 2$
*   **اجتماع:** $S_A' \cup S_C' = \{a, b, c, d, e, f\}$
    *   $|S_A' \cup S_C'| = 6$
*   **شباهت ژاکارد:** $\text{sim}(A, C) = \frac{2}{6} = \frac{1}{3} \approx \mathbf{0.3333}$
*   **فاصله ژاکارد:** $d(A, C) = 1 - 0.3333 = \mathbf{0.6667}$

**3. جفت (B, C):**
*   **اشتراک:** $S_B' \cap S_C' = \{d, e, f\}$
    *   $|S_B' \cap S_C'| = 3$
*   **اجتماع:** $S_B' \cup S_C' = \{c, d, e, f\}$
    *   $|S_B' \cup S_C'| = 4$
*   **شباهت ژاکارد:** $\text{sim}(B, C) = \frac{3}{4} = \mathbf{0.75}$
*   **فاصله ژاکارد:** $d(B, C) = 1 - 0.75 = \mathbf{0.25}$
    *   *نتیجه: این روش گرد کردن (rounding) شباهت A و C را نسبت به بخش (الف) کاهش داده و B و C را بسیار شبیه‌تر نشان می‌دهد.*

---

### **(د) محاسبه فاصله کسینوسی با امتیازات گرد شده:**

در این بخش از ماتریس گرد شده از قسمت (ج) استفاده می‌کنیم. خانه‌های خالی به عنوان 0 در بردارها لحاظ می‌شوند.

**بردارهای گرد شده:**
*   $\mathbf{A}' =$
*   $\mathbf{B}' =$
*   $\mathbf{C}' =$

**نُرم بردارهای گرد شده:**
*   $||\mathbf{A}'|| = \sqrt{1^2+1^2+1^2+0^2+1^2+0^2+0^2+0^2} = \sqrt{4} = 2$
*   $||\mathbf{B}'|| = \sqrt{0^2+0^2+0^2+1^2+1^2+1^2+0^2+0^2} = \sqrt{3} \approx 1.732$
*   $||\mathbf{C}'|| = \sqrt{0^2+0^2+1^2+1^2+1^2+1^2+0^2+0^2} = \sqrt{4} = 2$

**1. جفت (A, B):**
*   **حاصل‌ضرب داخلی:** $\mathbf{A}' \cdot \mathbf{B}' = (1)(0)+(1)(0)+(1)(0)+(0)(1)+(1)(1)+(0)(1)+(0)(0)+(0)(0) = 0+0+0+0+1+0+0+0 = \mathbf{1}$
*   **کسینوس زاویه:** $\cos(\theta_{AB}) = \frac{1}{2 \times \sqrt{3}} = \frac{1}{2 \times 1.732} = \frac{1}{3.464} \approx \mathbf{0.2887}$
*   **زاویه بر حسب درجه:** $\theta_{AB} = \arccos(0.2887) \approx \mathbf{73.20^\circ}$

**2. جفت (A, C):**
*   **حاصل‌ضرب داخلی:** $\mathbf{A}' \cdot \mathbf{C}' = (1)(0)+(1)(0)+(1)(1)+(0)(1)+(1)(1)+(0)(1)+(0)(0)+(0)(0) = 0+0+1+0+1+0+0+0 = \mathbf{2}$
*   **کسینوس زاویه:** $\cos(\theta_{AC}) = \frac{2}{2 \times 2} = \frac{2}{4} = \mathbf{0.5}$
*   **زاویه بر حسب درجه:** $\theta_{AC} = \arccos(0.5) = \mathbf{60^\circ}$

**3. جفت (B, C):**
*   **حاصل‌ضرب داخلی:** $\mathbf{B}' \cdot \mathbf{C}' = (0)(0)+(0)(0)+(0)(1)+(1)(1)+(1)(1)+(1)(1)+(0)(0)+(0)(0) = 0+0+0+1+1+1+0+0 = \mathbf{3}$
*   **کسینوس زاویه:** $\cos(\theta_{BC}) = \frac{3}{\sqrt{3} \times 2} = \frac{3}{1.732 \times 2} = \frac{3}{3.464} \approx \mathbf{0.8660}$
*   **زاویه بر حسب درجه:** $\theta_{BC} = \arccos(0.8660) \approx \mathbf{30^\circ}$
    *   *نتیجه: همانند ژاکارد، کسینوس نیز پس از گرد کردن، B و C را به یکدیگر نزدیک‌تر نشان می‌دهد.*

---

### **(ه) نرمال‌سازی ماتریس با کم کردن میانگین امتیاز کاربر:**

برای هر کاربر، میانگین امتیازات غیرخالی او محاسبه شده و سپس از هر امتیاز غیرخالی همان کاربر کم می‌شود. خانه‌های خالی، خالی باقی می‌مانند.

**1. میانگین امتیازات کاربران:**
*   **کاربر A:** میانگین (4, 5, 5, 1, 3, 2) = $(4+5+5+1+3+2) / 6 = 20/6 = \mathbf{3.333}$
*   **کاربر B:** میانگین (3, 4, 3, 1, 2) = $(3+4+3+1+2) / 5 = 13/5 = \mathbf{2.6}$
*   **کاربر C:** میانگین (2, 1, 3, 4, 5, 3) = $(2+1+3+4+5+3) / 6 = 18/6 = \mathbf{3.0}$

**2. ماتریس نرمال‌شده:**

| آیتم | a | b | c | d | e | f | g | h |
| :--- | :-: | :-: | :-: | :-: | :-: | :-: | :-: | :-: |
| **A** | $4-3.333=\mathbf{0.667}$ | $5-3.333=\mathbf{1.667}$ | $5-3.333=\mathbf{1.667}$ | $1-3.333=\mathbf{-2.333}$ | $3-3.333=\mathbf{-0.333}$ | $2-3.333=\mathbf{-1.333}$ | | |
| **B** | | | | $3-2.6=\mathbf{0.4}$ | $4-2.6=\mathbf{1.4}$ | $3-2.6=\mathbf{0.4}$ | $1-2.6=\mathbf{-1.6}$ | $2-2.6=\mathbf{-0.6}$ |
| **C** | $2-3=\mathbf{-1.0}$ | $1-3=\mathbf{-2.0}$ | $3-3=\mathbf{0.0}$ | $4-3=\mathbf{1.0}$ | $5-3=\mathbf{2.0}$ | $3-3=\mathbf{0.0}$ | | |

---

### **(و) محاسبه فاصله کسینوسی با ماتریس نرمال‌شده:**

در این بخش از ماتریس نرمال‌شده از قسمت (ه) استفاده می‌کنیم. خانه‌های خالی به عنوان 0 در بردارها لحاظ می‌شوند.

**بردارهای نرمال‌شده (با دقت اعشار):**
*   $\mathbf{A}'' = [0.667, 1.667, 1.667, -2.333, -0.333, -1.333, 0, 0]$
*   $\mathbf{B}'' = [0, 0, 0, 0.4, 1.4, 0.4, -1.6, -0.6]$
*   $\mathbf{C}'' = [-1.0, -2.0, 0.0, 1.0, 2.0, 0.0, 0, 0]$

**نُرم بردارهای نرمال‌شده:**
*   $||\mathbf{A}''|| = \sqrt{0.667^2+1.667^2+1.667^2+(-2.333)^2+(-0.333)^2+(-1.333)^2} = \sqrt{0.445+2.779+2.779+5.443+0.111+1.777} = \sqrt{13.334} \approx \mathbf{3.652}$
*   $||\mathbf{B}''|| = \sqrt{0.4^2+1.4^2+0.4^2+(-1.6)^2+(-0.6)^2} = \sqrt{0.16+1.96+0.16+2.56+0.36} = \sqrt{5.2} \approx \mathbf{2.280}$
*   $||\mathbf{C}''|| = \sqrt{(-1.0)^2+(-2.0)^2+0.0^2+1.0^2+2.0^2+0.0^2} = \sqrt{1+4+0+1+4+0} = \sqrt{10} \approx \mathbf{3.162}$

**1. جفت (A, B):**
*   **حاصل‌ضرب داخلی:** $\mathbf{A}'' \cdot \mathbf{B}'' = (0.667)(0) + (1.667)(0) + (1.667)(0) + (-2.333)(0.4) + (-0.333)(1.4) + (-1.333)(0.4) + (0)(-1.6) + (0)(-0.6)$
    $= 0 + 0 + 0 - 0.9332 - 0.4662 - 0.5332 + 0 + 0 = \mathbf{-1.9326}$
*   **کسینوس زاویه:** $\cos(\theta_{AB}) = \frac{-1.9326}{3.652 \times 2.280} = \frac{-1.9326}{8.327} \approx \mathbf{-0.2321}$
*   **زاویه بر حسب درجه:** $\theta_{AB} = \arccos(-0.2321) \approx \mathbf{103.43^\circ}$

**2. جفت (A, C):**
*   **حاصل‌ضرب داخلی:** $\mathbf{A}'' \cdot \mathbf{C}'' = (0.667)(-1.0) + (1.667)(-2.0) + (1.667)(0.0) + (-2.333)(1.0) + (-0.333)(2.0) + (-1.333)(0.0) + (0)(0) + (0)(0)$
    $= -0.667 - 3.334 + 0 - 2.333 - 0.666 + 0 + 0 + 0 = \mathbf{-7.00}$
*   **کسینوس زاویه:** $\cos(\theta_{AC}) = \frac{-7.00}{3.652 \times 3.162} = \frac{-7.00}{11.545} \approx \mathbf{-0.6063}$
*   **زاویه بر حسب درجه:** $\theta_{AC} = \arccos(-0.6063) \approx \mathbf{127.33^\circ}$

**3. جفت (B, C):**
*   **حاصل‌ضرب داخلی:** $\mathbf{B}'' \cdot \mathbf{C}'' = (0)(-1.0) + (0)(-2.0) + (0)(0.0) + (0.4)(1.0) + (1.4)(2.0) + (0.4)(0.0) + (-1.6)(0) + (-0.6)(0)$
    $= 0 + 0 + 0 + 0.4 + 2.8 + 0 + 0 + 0 = \mathbf{3.2}$
*   **کسینوس زاویه:** $\cos(\theta_{BC}) = \frac{3.2}{2.280 \times 3.162} = \frac{3.2}{7.209} \approx \mathbf{0.4439}$
*   **زاویه بر حسب درجه:** $\theta_{BC} = \arccos(0.4439) \approx \mathbf{63.65^\circ}$

**نتیجه‌گیری از نرمال‌سازی:**
با نرمال‌سازی امتیازات، مشاهده می‌شود که **زوایای بین کاربران بزرگتر شده‌اند**. این به این دلیل است که نرمال‌سازی، امتیازات پایین را به اعداد منفی و امتیازات بالا را به اعداد مثبت تبدیل می‌کند. در نتیجه، کاربرانی که دیدگاه‌های متضاد نسبت به آیتم‌های مشترک دارند (مانند A و C در ماتریس اصلی که A به آن 5 و C به آن 1 داده بود)، **بردارهایی با جهت‌های تقریباً مخالف** خواهند داشت که منجر به زوایای بزرگتر و فاصله کسینوسی بیشتر می‌شود. این اندازه‌گیری به **حدس‌های شهودی** در مورد شباهت کاربران بسیار نزدیک‌تر است.










### ترجمه صورت تمرین 5.1.1:

«تمرین 5.1.1: پیج رنک (Page Rank) هر صفحه را در شکل 5.7، با فرض عدم وجود مالیات (no taxation)، محاسبه کنید.»

---
![image](https://github.com/user-attachments/assets/9f3ad759-44fd-4e45-acaa-66578fe65553)

### پاسخ گام به گام:

**1. فهم فرمول PageRank بدون مالیات (No Taxation):**
هنگامی که مالیات (یا ضریب Damping Factor) در نظر گرفته نشود، به این معنی است که $d=1$. در این حالت، فرمول PageRank برای یک صفحه A به صورت زیر ساده می‌شود:

$PR(A) = \sum_{P \in B_A} \frac{PR(P)}{N_P}$

که در آن:
* $PR(A)$: پیج رنک صفحه A.
* $B_A$: مجموعه‌ای از صفحاتی که به صفحه A پیوند داده‌اند (لینک ورودی به A).
* $PR(P)$: پیج رنک صفحه P.
* $N_P$: تعداد لینک‌های خروجی از صفحه P.

**2. استخراج اطلاعات از شکل 5.7 (تصویر ارائه شده):**

نمودار شامل 4 صفحه (گره) به نام‌های A، B، C و D است.

* **لینک‌های خروجی و تعداد آن‌ها ($N_P$):**
    * A به B پیوند می‌دهد. $\implies N_A = 1$
    * B به A و C پیوند می‌دهد. $\implies N_B = 2$
    * C به A پیوند می‌دهد. $\implies N_C = 1$
    * D به A، B و C پیوند می‌دهد. $\implies N_D = 3$

* **لینک‌های ورودی ($B_A$):**
    * به A لینک می‌دهند: B، C، D
    * به B لینک می‌دهند: A، D
    * به C لینک می‌دهند: B، D
    * به D لینک می‌دهند: (هیچ صفحه‌ای به D لینک نمی‌دهد.)

**3. تنظیم دستگاه معادلات خطی:**

بر اساس فرمول PageRank و اطلاعات استخراج شده:

* $PR(A) = \frac{PR(B)}{N_B} + \frac{PR(C)}{N_C} + \frac{PR(D)}{N_D}$
    $PR(A) = \frac{PR(B)}{2} + \frac{PR(C)}{1} + \frac{PR(D)}{3} \quad (Equation ۱)$

* $PR(B) = \frac{PR(A)}{N_A} + \frac{PR(D)}{N_D}$
    $PR(B) = \frac{PR(A)}{1} + \frac{PR(D)}{3} \quad (Equation ۲)$

* $PR(C) = \frac{PR(B)}{N_B} + \frac{PR(D)}{N_D}$
    $PR(C) = \frac{PR(B)}{2} + \frac{PR(D)}{3} \quad (Equation ۳)$

* $PR(D) = 0$ (زیرا هیچ لینکی به صفحه D وارد نمی‌شود.) $\quad (Equation ۴)$

علاوه بر این، مجموع پیج رنک همه صفحات باید برابر 1 باشد:
* $PR(A) + PR(B) + PR(C) + PR(D) = 1 \quad (Equation ۵)$

**4. حل دستگاه معادلات:**

از (معادله ۴) می‌دانیم که $PR(D) = 0$. این مقدار را در معادلات دیگر جایگزین می‌کنیم:

1.  $PR(A) = \frac{PR(B)}{2} + PR(C) + 0$
    $\implies PR(A) = \frac{PR(B)}{2} + PR(C) \quad (Equation ۱')$

2.  $PR(B) = PR(A) + 0$
    $\implies PR(B) = PR(A) \quad (Equation ۲')$

3.  $PR(C) = \frac{PR(B)}{2} + 0$
    $\implies PR(C) = \frac{PR(B)}{2} \quad (Equation ۳')$

اکنون از (معادله ۲') می‌دانیم $PR(A) = PR(B)$. این را در (معادله ۱') جایگزین می‌کنیم:
$PR(B) = \frac{PR(B)}{2} + PR(C)$
$PR(B) - \frac{PR(B)}{2} = PR(C)$
$\frac{PR(B)}{2} = PR(C)$
این نتیجه دقیقاً با (معادله ۳') مطابقت دارد، که نشان می‌دهد محاسبات ما سازگار هستند.

حالا مقادیر $PR(A)$ و $PR(C)$ را بر حسب $PR(B)$ در (معادله ۵) جایگزین می‌کنیم:
$PR(B) + PR(B) + \frac{PR(B)}{2} + 0 = 1$
$2 \cdot PR(B) + \frac{PR(B)}{2} = 1$
$\left(2 + \frac{1}{2}\right) \cdot PR(B) = 1$
$\left(\frac{4}{2} + \frac{1}{2}\right) \cdot PR(B) = 1$
$\frac{5}{2} \cdot PR(B) = 1$
$PR(B) = \frac{2}{5} = 0.4$

اکنون می‌توانیم پیج رنک بقیه صفحات را محاسبه کنیم:
* $PR(A) = PR(B) = 0.4$
* $PR(C) = \frac{PR(B)}{2} = \frac{0.4}{2} = 0.2$
* $PR(D) = 0$

**5. نتیجه نهایی:**

پیج رنک هر صفحه به صورت زیر است:
* $PR(A) = 0.4$
* $PR(B) = 0.4$
* $PR(C) = 0.2$
* $PR(D) = 0$

مجموع پیج رنک‌ها: $0.4 + 0.4 + 0.2 + 0 = 1.0$، که صحیح است.



