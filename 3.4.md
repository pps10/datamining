
---
# تحلیل آستانه (Threshold) برای تابع S-curve در LSH

این سند به بررسی **آستانه شباهت ژاکارد (Jaccard similarity)** می‌پردازد که در آن، احتمال انتخاب دو سند به عنوان یک جفت کاندید در تکنیک Locality-Sensitive Hashing (LSH) برای امضاهای Minhash برابر با 0.5 می‌شود. تابع **S-curve** به شکل $1 - (1 - s^r)^b$ این احتمال را مدل می‌کند، جایی که **$s$** شباهت ژاکارد، **$b$** تعداد باندها (bands) و **$r$** تعداد سطرها (rows) در هر باند است.

### محاسبه آستانه دقیق

برای یافتن آستانه دقیق $s$ که در آن احتمال برابر با 0.5 می‌شود، معادله $1 - (1 - s^r)^b = \frac{1}{2}$ را حل می‌کنیم:

1.  $\frac{1}{2} = (1 - s^r)^b$
2.  با گرفتن ریشه $b$-ام از طرفین:
    $$(\frac{1}{2})^{1/b} = 1 - s^r$$
3.  با جابه‌جایی $s^r$:
    $$s^r = 1 - (\frac{1}{2})^{1/b}$$
4.  در نهایت، با گرفتن ریشه $r$-ام از طرفین، فرمول آستانه دقیق $s$ به دست می‌آید:
    $$s = (1 - (\frac{1}{2})^{1/b})^{1/r}$$

---

### مقایسه آستانه دقیق و تقریبی

در ادامه، محاسبات را برای هر یک از جفت‌های $(r, b)$ مشخص شده در تمرین 3.4.1 انجام داده و نتایج را با تخمین ساده $(1/b)^{1/r}$ مقایسه می‌کنیم:

---

#### حالت اول: $r = 3$ و $b = 10$

* **آستانه دقیق:**
    $s = (1 - (\frac{1}{2})^{1/10})^{1/3}$
    $s \approx (1 - 0.93303)^{1/3}$
    $s \approx (0.06697)^{1/3}$
    $s \approx \mathbf{0.406}$

* **آستانه تقریبی:**
    $s \approx (1/10)^{1/3}$
    $s \approx (0.1)^{1/3}$
    $s \approx \mathbf{0.464}$

* **مقایسه:** آستانه دقیق ($0.406$) **کمتر** از آستانه تقریبی ($0.464$) است.

---

#### حالت دوم: $r = 6$ و $b = 20$

* **آستانه دقیق:**
    $s = (1 - (\frac{1}{2})^{1/20})^{1/6}$
    $s \approx (1 - 0.96594)^{1/6}$
    $s \approx (0.03406)^{1/6}$
    $s \approx \mathbf{0.522}$

* **آستانه تقریبی:**
    $s \approx (1/20)^{1/6}$
    $s \approx (0.05)^{1/6}$
    $s \approx \mathbf{0.546}$

* **مقایسه:** آستانه دقیق ($0.522$) **کمتر** از آستانه تقریبی ($0.546$) است. لازم به ذکر است، در Example 3.11 منابع بیان می‌کنند که برای $b=20$ و $r=5$، آستانه کمی بیشتر از 0.5 است. آستانه دقیق محاسبه شده برای این حالت ($r=5, b=20$) برابر با $(1 - (1/2)^{1/20})^{1/5} \approx (1 - 0.96594)^{1/5} \approx (0.03406)^{1/5} \approx 0.506$ است که با این توضیحات سازگار است.

---

#### حالت سوم: $r = 5$ و $b = 50$

* **آستانه دقیق:**
    $s = (1 - (\frac{1}{2})^{1/50})^{1/5}$
    $s \approx (1 - 0.98614)^{1/5}$
    $s \approx (0.01386)^{1/5}$
    $s \approx \mathbf{0.435}$

* **آستانه تقریبی:**
    $s \approx (1/50)^{1/5}$
    $s \approx (0.02)^{1/5}$
    $s \approx \mathbf{0.457}$

* **مقایسه:** آستانه دقیق ($0.435$) **کمتر** از آستانه تقریبی ($0.457$) است.

---

### نتیجه‌گیری نهایی

برای هر سه جفت $(r, b)$ بررسی شده، آستانه دقیق شباهت که در آن احتمال کاندید شدن به $0.5$ می‌رسد، **همواره کمتر از** آستانه تقریبی $(1/b)^{1/r}$ است. این نشان می‌دهد که تخمین ساده $(1/b)^{1/r}$ تمایل دارد که آستانه واقعی را، یعنی جایی که احتمال کاندید شدن دقیقاً $0.5$ است، **بیش‌برآورد (overestimate)** کند.

با این حال، همانطور که منابع مربوط به LSH اشاره می‌کنند، این تخمین $(1/b)^{1/r}$ به عنوان یک نقطه تقریب "تقریباً" در جایی که منحنی S بیشترین شیب را دارد، مفید است. این فرمول به عنوان یک راهنمای عملی برای انتخاب پارامترهای $r$ و $b$ بر اساس آستانه شباهت مطلوب $t$ (که در آن $t \approx (1/b)^{1/r}$) ارائه می‌شود و به ما کمک می‌کند تا به سرعت ترکیب‌های مناسب $r$ و $b$ را برای یک سطح شباهت هدف، شناسایی کنیم.